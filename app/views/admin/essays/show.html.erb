<h1><%= @essay_detail.volume_link %></h1>
<h2><%= @essay_detail.essay_title %> <small>By <%= @essay_detail.essay_author %></small> </h2>
<p>
  <%= link_to 'Edit Essay', edit_admin_issue_essay_path(@essay_detail.issue, @essay_detail.essay), class: 'btn btn-primary' %>
  <%= @essay_detail.public_link %>
</p>
<p class="on-off btn-group">
  <% if @essay_detail.published? %>
    <span class="glyphicon glyphicon-eye-open"></span> Published -
    <%= link_to(raw('<span class="glyphicon glyphicon-eye-close"></span> Unpublish'), unpublish_admin_issue_essay_path, method: :put) %></p>
  <% else %>
     <span class="glyphicon glyphicon-eye-close"></span> Unpublished -
     <%= link_to(raw('<span class="glyphicon glyphicon-eye-open"></span> Publish'), publish_admin_issue_essay_path, method: :put) %></p>
  <% end %>
</p>
<hr>
<div class="row">
  <div class="large-7 columns">
    <h2>Content</h2>
    <% if @essay_detail.components_with_content.present? %>
      <% if @essay_detail.components_with_content.size > 0 %>
        <ul class="list">
          <% @essay_detail.components_with_content.each do |component, component_title| %>
            <li><span class="glyphicon glyphicon-ok-circle"></span> <%= link_to raw("#{component_title}"), @essay_detail.edit_content_link(component) %></li>
          <% end %>
        </ul>
      <% end %>
    <% else %>
      <div class="bg-warning">
        No Content has been added to this essay.  Select content from the list below to add content to this essay.
      </div>
    <% end %>
    <% if @essay_detail.components_without_content.present? %>
      <h2>Add Content</h2>
      <ul class="list">
        <% @essay_detail.components_without_content.each do |component, component_title| %>
          <li><span class="glyphicon glyphicon-plus-sign"></span> <%= link_to raw("#{component_title}"), @essay_detail.edit_content_link(component) %></li>
        <% end %>
      </ul>
    <% end %>
    <hr>
    <div class="files">
      <h2>Companion Material</h2>
      <% if @essay_detail.files.present? %>
        <ul class="list">
          <% @essay_detail.files.each do |file| %>
            <li>
              <%= link_to file.title, edit_admin_issue_essay_attached_file_path(@essay_detail.issue, @essay_detail.essay, file) %>
              <%= link_to(raw('<span class="delete"><span class="glyphicon glyphicon-trash"></span> Delete</span>'), admin_issue_essay_attached_file_path(@essay_detail.issue, @essay_detail.essay, file), method: :delete, confirm: "Delete \"#{file.title}\"?") %></li>
          <% end %>
        </ul>
      <% else %>
        <p><%= link_to 'Upload Companion Material', new_admin_issue_essay_attached_file_path(@essay_detail.issue, @essay_detail.essay), class: 'btn btn-primary' %></p>
      <% end %>
    </div>
    <div class="awards">
      <h2>Awards</h2>
      <% if @essay_detail.essay_award.present? %>
        <ul class="list">
          <li>
            <%= link_to @essay_detail.essay_award.title, edit_admin_issue_essay_essay_award_path(@essay_detail.issue, @essay_detail.essay, @essay_detail.essay_award) %>
            <%= link_to(raw('<span class="delete"><span class="glyphicon glyphicon-trash"></span> Delete</span>'), admin_issue_essay_essay_award_path(@essay_detail.issue, @essay_detail.essay, @essay_detail.essay_award), method: :delete, confirm: "Remove \"#{@essay_detail.essay_award.title}\"?") %>
          </li>
        </ul>
      <% else %>
        <p><%= link_to 'Add Award', new_admin_issue_essay_essay_award_path(@essay_detail.issue, @essay_detail.essay), class: 'btn btn-primary' %></p>
      <% end %>
    </div>
  </div>

  <div class="large-5 columns">
    <h2>Images</h2>
    <div class="image_editor">
      <div class="image">

        <a href="#" class="change btn btn-primary">Edit</a>

        <h3>Cover Image</h3>
        <%= @essay_detail.image_form.essay_cover_image %>

        <h4>Image Credit: <%= @essay_detail.image_form.cover_image_credit %></h4>

        <h4>Image Alt: <%= @essay_detail.image_form.cover_image_alt %></h4>

        <h3>Author Image</h3>
        <%= @essay_detail.image_form.essay_author_image %>

        <br/><br/><a href="#" class="change btn btn-primary">Change</a><br/><br/>
      </div>
      <div class="form" style="display:none;">
        <%= simple_form_for @essay_detail.image_form, url: save_images_admin_issue_essay_path(@essay_detail.issue, @essay_detail.essay), method: 'put' do | f | %>

          <%= f.input :cover_image, as: :file, hint: 'Image dimensions 670x430' %>
          <%= f.input :cover_image_credit %>
          <%= f.input :cover_image_alt, label: 'Cover Image Alternate', hint: 'The alternate should be filled out with a description of the image.  This is for screen readers.' %>

          <%= f.input :author_image, as: :file, hint: 'Image dimensions 140x113' %>

          <%= f.submit :save, class: 'btn btn-primary' %>
          <a class="cancel">Cancel</a>
        <% end %>
      </div>
    </div>
  </div>
</div>
